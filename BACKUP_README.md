# Резервное копирование проекта

**Полная политика сохранности данных (аудит, бэкапы, восстановление):** см. [DATA_SAFETY.md](DATA_SAFETY.md).

---

## Быстрый бэкап кода и конфига

Скрипт **`backup.ps1`** копирует проект (без `node_modules` и `.git`) и **копию `server\.env`** в папку рядом с проектом.

1. PowerShell: `cd "C:\Users\Stepa\Desktop\Harvest scale\ClodV4"`.
2. Выполните: `.\backup.ps1`.

Появится папка **`ClodV4-backup-ГГГГ-ММ-ДД_ЧЧ-ММ`**. В ней уже есть `server\.env` для восстановления.

**Бэкап базы данных (обязательно для сохранности данных):** выполните также `.\backup-db.ps1` (нужен `mongodump` в PATH и `MONGODB_URI` в `server\.env`). Либо используйте бэкапы MongoDB Atlas.

Если выполнение скриптов запрещено:
```powershell
Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned
```

---

## Восстановление из копии

1. Скопируйте папку бэкапа в нужное место (при необходимости переименуйте в `ClodV4`).
2. В папке: `npm install`, в `client` и `server` — `npm install`.
3. Файл `server\.env` уже лежит в бэкапе; при смене БД поправьте `MONGODB_URI`.
4. БД восстанавливайте из дампа (`mongorestore`) или из бэкапов Atlas — см. [DATA_SAFETY.md](DATA_SAFETY.md).

---

## Дополнительно: Git (история изменений)

Чтобы не только бэкапить, но и откатываться к любым прошлым версиям:

1. В папке проекта откройте терминал и выполните:
   ```bash
   git init
   git add .
   git commit -m "Backup: current state"
   ```
2. После больших изменений делайте новый коммит:
   ```bash
   git add .
   git commit -m "Описание изменений"
   ```
3. Чтобы сохранить «контрольную точку» с именем:
   ```bash
   git tag backup-2026-02-05
   ```

Тогда в любой момент можно вернуться к этой точке или просто смотреть, что менялось.
